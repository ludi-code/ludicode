<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">


	<title>Ludicode</title>


	<!-- bootstrap -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="css/bootstrap-toggle.min.css">
	<link rel="stylesheet" href="css/style.css">

	<!-- Code local -->
	<script type="text/javascript" src="libs/jquery.js"></script>
	<script type="text/javascript" src="libs/bootstrap.js"></script>
	<script type="text/javascript" src="libs/bootstrap-toggle.min.js"></script>
	<script type="text/javascript" src="scripts/page_controllers/all.js"></script>


	<!-- Code dessin -->
	<link rel="stylesheet" href="css/draw_ui.css" />
	<script src="libs/skulpt/skulpt.js"></script>
	<script src="libs/skulpt/skulpt-stdlib.js" type="text/javascript"></script>

	<link rel="stylesheet" href="libs/code_mirror/codemirror.css">
	<link rel="stylesheet" href="libs/code_mirror/theme.css">
	

	<script src="libs/code_mirror/codemirror.js"></script>
	<script src="libs/code_mirror/parsepython.js"></script>
	<script type="text/javascript">


	var python_editor = null;
	var python_output = null;

	function outf(text) {
		python_output.html(python_output.html() + text);
	}
	function builtinRead(x) {
		if (Sk.builtinFiles === undefined
			|| Sk.builtinFiles["files"][x] === undefined)
			throw "File not found: '" + x + "'";
		return Sk.builtinFiles["files"][x];
	}
	function run() {
		var prog = python_editor.getValue();
		python_output.text('OUTPUT \n')
		Sk.pre = "";
		Sk.configure({
			output : outf,
			read : builtinRead
		});
		Sk.externalLibraries = {

		};
		(Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
		var myPromise = Sk.misceval.asyncToPromise(function() {
			return Sk.importMainWithBody("<stdin>", false, prog, true);
		});
		myPromise.then(function(mod) {
			console.log('success');
		}, function(err) {
			console.log(err.toString());
		});

	}


	$(document).ready(function(){

		python_editor = CodeMirror(document.getElementById("python_editor"), {
			lineNumbers: true,
			indentUnit: 4,
			tabMode: "shift",
			mode: "python",
			theme: "dracula",
			value:"import turtle\nt = turtle.Turtle()\nfor c in ['red', 'green', 'yellow', 'blue']:\n    t.color(c)\n    t.forward(75)\n    t.left(90)\n\n"
		});

		python_output = $("<pre></pre>")
		python_output.addClass("output_bottom");
		python_output.text("OUTPUT\n")
		python_output.appendTo($("#python_editor"))


	});

	</script>


</head>

<body>
	<div id="fb-root"></div>
	<nav class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
				data-toggle="collapse" data-target="#navbar" aria-expanded="false"
				aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span> <span
				class="icon-bar"></span> <span class="icon-bar"></span> <span
				class="icon-bar"></span>
			</button>
			<a class="navbar-brand menu_bar_element" id="home_bar"
			href="index.html">Ludicode</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">

			<ul class="nav navbar-nav">

				<li class="menu_bar_element" id="levels_bar"><a
					href="levels.html">Jouer</a></li>
					<li class="menu_bar_element" id="levels_bar"><a
						href="dessin.html">Dessiner</a></li>
						<li class="menu_bar_element" id="editor_bar"><a
							href="editor.html">Editeur</a></li>
							<li class="menu_bar_element" id="ludidoc_bar"><a
								href="ludidoc.html">Ludidoc</a></li>
								<li class="menu_bar_element" id="leaderboard_bar"><a
									href="leaderboard.html">Classement</a></li>

								</ul>

								<div class="navbar-form navbar-right">
									<div id="login_navbar">
										<div class="form-group">
											<input id="name_login" type="text" placeholder="Pseudo"
											class="form-control" /> <input id="password_login"
											type="password" placeholder="Mot de passe" class="form-control" />
											<button id="login_send" type="submit" class="btn btn-success"
											data-toggle="popover">Envoyer</button>
										</div>
										<div class="form-group">
											<a href="register.html" type="button"
											class="menu_bar_element btn btn-info">M'enregistrer</a>
										</div>
									</div>
									<div id="info_profil_navbar">
										<a id="user_icon" href="profile.html" class="menu_bar_element"
										data-toogle="tooltip" title="Mon profil"> <span
										class="glyphicon glyphicon-user" aria-hidden="true"></span>
									</a> <a href="chat.html" data-toogle="tooltip" title="Mes messages">
									<span class="glyphicon glyphicon-comment" aria-hidden="true">
									</span>
								</a> <a id="notif_icon" href="#" data-toogle="tooltip"
								data-title="Mes notifications"> <span
								class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
							</a> <a id="options_icon" class="menu_bar_element" href="options.html"
							data-toogle="tooltip" title="Paramètres"> <span
							class="glyphicon glyphicon-cog" aria-hidden="true"></span>
						</a> <a id="logout_icon" href="#" data-toogle="tooltip"
						title="Deconnéxion"> <span class="glyphicon glyphicon-off"
						aria-hidden="true"></span>
					</a>
				</div>
			</div>
		</div>
		<!--/.navbar-collapse -->
	</div>
</nav>


<div class="container main_panel" id="home_pane">
	<div class="row">
		<h1>Dessiner avec la programmation</h1>

		<div class="draw_container">


			<div class="title">
				Ecrivez
				du code dans la fenêtre ci-dessous pour commencer à dessiner !
			</div>

			<div class="centered">
				<div class="draw_toolbox" id="python_editor" sttyle="float:left;">
					<div class="toolbar">
						<div class="container">
							<a href="#" onclick="run();"><div class="tlb_btn">►</div>Lancer votre programme </a>
						</div>
					</div>
				</div>	

				<div class="draw_toolbox" id="python_editor" style="float:right;">
	<div id="mycanvas"></div>
				</div>	

			</div>
		</div>
	</div>

	<br />




</div>
</div>
<!-- container home page -->

<footer class="container">
	<div class="row">
		<hr />
		<p>&copy; Dashin Games 2015</p>
	</div>
</footer>
</body>
</html>

